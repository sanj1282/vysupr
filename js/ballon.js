var x,y,c=document.getElementById("c"),ctx=c.getContext("2d"),bc=document.createElement("canvas"),bCtx=bc.getContext("2d"),cw=c.width=bc.width=window.innerWidth,cx=cw/2,ch=c.height=bc.height=window.innerHeight+100,cy=ch,frames=0,requestId=null,rad=Math.PI/180,kappa=.5522847498;bCtx.strokeStyle="#abcdef",bCtx.lineWidth=1;var balloons=[];function Balloon(){this.r=randomIntFromInterval(20,70),this.R=1.4*this.r,this.x=randomIntFromInterval(this.r,cw-this.r),this.y=ch+2*this.r,this.a=4.5*this.r,this.pm=Math.random()<.5?-1:1,this.speed=randomIntFromInterval(1.5,4),this.k=this.speed/5,this.hue=this.pm>0?"210":"10"}function Draw(){updateBallons(bCtx),ctx.clearRect(0,0,cw,ch);var t=bc;ctx.drawImage(t,0,0),requestId=window.requestAnimationFrame(Draw)}function Init(){requestId&&(window.cancelAnimationFrame(requestId),requestId=null),cw=c.width=bc.width=window.innerWidth,cx=cw/2,ch=c.height=bc.height=window.innerHeight+100,cy=ch,bCtx.strokeStyle="#abcdef",bCtx.lineWidth=1,Draw()}function updateBallons(t){if((frames+=1)%37==0&&balloons.length<37){var e=new Balloon;balloons.push(e)}t.clearRect(0,0,cw,ch);for(var r=0;r<balloons.length;r++){var a=balloons[r];a.y>-a.a?a.y-=a.speed:a.y=parseInt(ch+a.r+a.R);var n=thread(a,t);a.cx=n.x,a.cy=n.y-a.R,t.fillStyle=Grd(n.x,n.y,a.r,a.hue),drawBalloon(a,t)}}function drawBalloon(t,e){var r=t.r*kappa,a={x:t.cx-t.r,y:t.cy},n={x:a.x,y:a.y+r},o={x:a.x,y:a.y-r},i={x:t.cx,y:t.cy-t.r},c={x:t.cx-r,y:i.y},d={x:t.cx+r,y:i.y},x={x:t.cx+t.r,y:t.cy},h={x:x.x,y:x.y-r},y={x:x.x,y:x.y+r},l={x:t.cx,y:t.cy+t.R},s={x:l.x+r,y:l.y},u={x:l.x-r,y:l.y},w={x:l.x+.2*t.r*Math.cos(70*rad),y:l.y+.2*t.r*Math.sin(70*rad)},m={x:l.x+.2*t.r*Math.cos(110*rad),y:l.y+.2*t.r*Math.sin(110*rad)};e.beginPath(),e.moveTo(l.x,l.y),e.bezierCurveTo(u.x,u.y,n.x,n.y,a.x,a.y),e.bezierCurveTo(o.x,o.y,c.x,c.y,i.x,i.y),e.bezierCurveTo(d.x,d.y,h.x,h.y,x.x,x.y),e.bezierCurveTo(y.x,y.y,s.x,s.y,l.x,l.y),e.lineTo(w.x,w.y),e.lineTo(m.x,m.y),e.closePath(),e.fill()}function thread(t,e){e.beginPath();for(var r=t.a;r>0;r-=1){var a=r*rad;x=t.x+50*t.pm*Math.cos(t.k*a-frames*rad),y=t.y+25*t.pm*Math.sin(t.k*a-frames*rad)+50*a,e.lineTo(x,y)}return e.stroke(),p={x:x,y:y}}function Grd(t,e,r,a){return grd=ctx.createRadialGradient(t-.5*r,e-1.7*r,0,t-.5*r,e-1.7*r,r),grd.addColorStop(0,"hsla("+a+",100%,65%,.95)"),grd.addColorStop(.4,"hsla("+a+",100%,45%,.85)"),grd.addColorStop(1,"hsla("+a+",100%,25%,.80)"),grd}function randomIntFromInterval(t,e){return~~(Math.random()*(e-t+1)+t)}setTimeout(function(){Init(),window.addEventListener("resize",Init,!1)},15);